# vars.yml

# Determine the effective user to use (original sudo user if present, else the current ansible user, else ssh user)
local_user: >-
  {{ ansible_env.SUDO_USER
     | default(ansible_user_id)
     | default(ansible_ssh_user) }}

# Determine the home directory of that user
home_dir: "{{ lookup('pipe', 'eval echo ~' + local_user) }}"

# Determine the primary group of that user
local_user_primary_group: "{{ lookup('pipe', 'id -gn ' + local_user) }}"
